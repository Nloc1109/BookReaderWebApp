<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - BookReader</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/home.css?v=@DateTime.Now.Ticks" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/library.css?v=@DateTime.Now.Ticks" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/categories.css?v=@DateTime.Now.Ticks" asp-append-version="true" />
    <style>
        /* Light Mode - Orange Pink Theme (With Grid Pattern) */
        body.light-mode {
            background: #fff5f5 !important;
            color: #7c2d12 !important;
        }
        
        body.light-mode {
            background-image: 
                linear-gradient(rgba(251, 146, 60, 0.6) 1px, transparent 1px),
                linear-gradient(90deg, rgba(251, 146, 60, 0.6) 1px, transparent 1px) !important;
            background-size: 30px 30px !important;
            animation: gridMove 15s linear infinite !important;
        }
        
        /* Dark Mode - Original Blue Theme (With Grid Pattern) */
        body.dark-mode {
            background: #1e293b !important;
            color: #ffffff !important;
        }
        
        body.dark-mode {
            background-image: 
                linear-gradient(rgba(78, 222, 128, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(78, 222, 128, 0.1) 1px, transparent 1px) !important;
            background-size: 30px 30px !important;
            animation: gridMove 15s linear infinite !important;
        }
        
        @@keyframes gridMove {
            0% { background-position: 0 0; }
            100% { background-position: 30px 30px; }
        }
    </style>
</head>
<body class="dark-mode">
    <!-- Background Pattern -->
    <div class="background-pattern"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-book-open"></i>
            <span>BookReader</span>
        </div>
        
        <!-- Home button for non-home pages -->
        @if (ViewContext.RouteData.Values["controller"]?.ToString() != "Home" || ViewContext.RouteData.Values["action"]?.ToString() != "Index")
        {
            <a href="/" class="home-btn" title="Về trang chủ">
                <i class="fas fa-home"></i>
            </a>
        }
        
        <nav class="nav-links">
            <a href="/Books">Sách điện tử</a>
            <a href="/Audiobooks">Sách nói</a>
            <a href="/Categories">Thể loại</a>
            <a href="/Library">Thư viện</a>
        </nav>
        
        <div class="header-actions">
            <i class="fas fa-bell"></i>
            <i class="fas fa-search"></i>
            <i class="fas fa-moon" id="theme-toggle"></i>
            <a href="/Account/Login" class="btn btn-secondary">Đăng nhập</a>
            <a href="/Account/Register" class="btn btn-primary">Đăng ký</a>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        @RenderBody()
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Về BookReader</h3>
                <p>Thư viện sách điện tử và sách nói hàng đầu Việt Nam, cung cấp hàng nghìn đầu sách chất lượng cao.</p>
            </div>
            
            <div class="footer-section">
                <h3>Liên kết</h3>
                <a href="/About">Về chúng tôi</a>
                <a href="/Contact">Liên hệ</a>
                <a href="/Help">Trợ giúp</a>
                <a href="/Terms">Điều khoản</a>
            </div>
            
            <div class="footer-section">
                <h3>Thể loại</h3>
                <a href="/Categories/Education">Giáo dục</a>
                <a href="/Categories/Literature">Văn học</a>
                <a href="/Categories/Science">Khoa học</a>
                <a href="/Categories/Technology">Công nghệ</a>
            </div>
            
            <div class="footer-section">
                <h3>Hỗ trợ</h3>
                <a href="/FAQ">Câu hỏi thường gặp</a>
                <a href="/Support">Hỗ trợ kỹ thuật</a>
                <a href="/Feedback">Góp ý</a>
                <a href="/Report">Báo lỗi</a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2024 BookReader. Tất cả quyền được bảo lưu.</p>
        </div>
    </footer>

    <script src="~/js/home.js" asp-append-version="true"></script>
    <script>
        // Manual theme toggle only
        function toggleTheme() {
            const body = document.body;
            const themeToggle = document.getElementById('theme-toggle');
            
            if (body.classList.contains('light-mode')) {
                // Switch to dark mode
                body.classList.remove('light-mode');
                body.classList.add('dark-mode');
                localStorage.setItem('theme', 'dark');
                themeToggle.className = 'fas fa-moon';
            } else {
                // Switch to light mode
                body.classList.remove('dark-mode');
                body.classList.add('light-mode');
                localStorage.setItem('theme', 'light');
                themeToggle.className = 'fas fa-sun';
            }
        }
        
        // Initialize theme
        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeToggle = document.getElementById('theme-toggle');
            
            if (savedTheme) {
                // Use saved theme
                if (savedTheme === 'light') {
                    body.classList.remove('dark-mode');
                    body.classList.add('light-mode');
                    themeToggle.className = 'fas fa-sun';
                } else {
                    body.classList.remove('light-mode');
                    body.classList.add('dark-mode');
                    themeToggle.className = 'fas fa-moon';
                }
            } else {
                // Default to dark mode
                body.classList.add('dark-mode');
                themeToggle.className = 'fas fa-moon';
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            
            // Theme toggle button
            document.getElementById('theme-toggle').addEventListener('click', function() {
                toggleTheme();
            });
        });
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
